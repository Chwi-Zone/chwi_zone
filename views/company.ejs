<!DOCTYPE HTML>
<html>

<head>
   <title>CHWI-ZONE</title>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
   <link rel="stylesheet" href="../css/main.css" />
   <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>

<body class="is-preload">

   <!-- Wrapper -->
   <div id="wrapper">
      <!-- Header -->
      <header id="header">
         <h1><a href="./index">Chwi-Zone</a></h1>
         <nav class="links">
            <ul>
               <li><a href="./mypage">마이페이지</a></li>
               <li><a href="./favorite">즐겨찾기</a></li>
            </ul>
         </nav>
         <nav class="main">
            <ul>
               <li class="search">
                  <a class="fa-search" href="#search">Search</a>
                  <form id="search" method="get" action="#">
                     <input type="text" name="query" placeholder="Search" />
                  </form>
               </li>
               <li class="menu">
                  <a class="fa-bars" href="#menu">Menu</a>
               </li>
            </ul>
         </nav>
      </header>
      <!-- Menu -->
      <section id="menu">
         <!-- Search -->
         <section>
            <form class="search" method="get" action="#">
               <input type="text" name="query" placeholder="Search" />
            </form>
         </section>
         <!-- Links -->
         <section>
            <ul class="links">
               <li>
                  <a href="./mypage">
                     <h3>마이페이지</h3>
                     <p>MyPage</p>
                  </a>
               </li>
               <li>
                  <a href="./favorite">
                     <h3>즐겨찾기</h3>
                     <p>Favorites</p>
                  </a>
               </li>
            </ul>
         </section>
         <!-- login action -->
         <section>
            <ul class="actions stacked">
               <li>
                  <a href="https://accounts.google.com/o/oauth2/v2/auth?scope=https://www.googleapis.com/auth/youtube.readonly openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile&access_type=offline&include_granted_scopes=true&state=state_parameter_passthrough_value&redirect_uri=http://localhost:3000/account/googlesigncallback&response_type=code&client_id=499654759948-g0d8rmmhttlf55ijomhap2uboh6ot3sh.apps.googleusercontent.com">로그인</a>
               </li>
            </ul>
         </section>
      </section>
      <!-- Main -->
      <div id="main">
         <!-- Sidebar(틀) -->
         <section id="sidebar">
            <section id="intro">
               <!--chwi-zone Logo-->
               <a href="./index" class="logo"><img src="../images/hana.png" alt="" ></a>
               <header>
                  <h2>Chwi-Zone</h2>
                  <p>당신의 취향 분석을 통한 주식 추천</p>
               </header>
            </section>
         </section>
         <h1>COMPANY 페이지</h1>
         <span>회사 : </span>
         <span id = "name"> </span><br>
         <span>산업 : </span>
         <span id = "sector"></span>
         <!--data 분석해서 띄우기 -->
         <div id ="company"></div>
         <!-- Footer -->
         <section id="footer">
         </section>
      </div>

      <!-- Scripts --> 
      <script src="../js/jquery-3.2.1.min.js"></script>
      <script src="../js/browser.min.js"></script>
      <script src="../js/breakpoints.min.js"></script>
      <script src="../js/util.js"></script>
      <script src="../js/main.js"></script>
      <script>
      //쿼리문 분석해서 ajax로 company.js ./info 로 날려서 정보 받아오기
      //queryString를 객체화(Object)하는 메소드
      function getQueryStringObject() {
        var a = window.location.search.substr(1).split("&");
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i) {
          var p = a[i].split("=", 2);
          if (p.length == 1) b[p[0]] = "";
          else b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
      }
      var qs = getQueryStringObject(); 
      console.log(qs);
      $.ajax({
        url: "/company/info",
        type: "GET",
        data: {
          stocks_id: qs.stocks_id,
        },
        success: function (data) {
         console.log(data);
         $("#name").text(data[0].stocks_name);
         $("#sector").text(data[0].sector_name);
        },
      });
      </script>

</body>

</html>